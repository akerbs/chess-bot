# Настройка API сервера

Для работы Web App нужен API сервер, который предоставляет состояние игры и валидные ходы.

## Локальная разработка

API сервер автоматически запускается на порту `3001` вместе с ботом.

## Продакшен (с Netlify)

Web App на Netlify не может обращаться к `localhost:3001`. Нужно настроить публичный доступ к API.

### Вариант 1: Использовать тот же туннель для API

Если вы используете ngrok/cloudflared для Web App, создайте второй туннель для API:

```bash
# Туннель для Web App (порт 3000)
cloudflared tunnel --url http://localhost:3000

# В другом терминале - туннель для API (порт 3001)
cloudflared tunnel --url http://localhost:3001
```

Затем обновите `webapp/app.js`, чтобы использовать публичный URL API.

### Вариант 2: Развернуть API на отдельном сервере

Разверните API сервер на VPS или облачном сервисе (Heroku, Railway, Render и т.д.).

### Вариант 3: Использовать один сервер для всего

Объедините Web App и API на одном сервере (например, Express.js).

## Быстрое решение для тестирования

Для быстрого тестирования можно использовать локальный туннель:

1. Запустите бота (API сервер запустится автоматически на порту 3001)
2. Создайте туннель для API:
   ```bash
   cloudflared tunnel --url http://localhost:3001
   ```
3. Обновите `webapp/app.js` - замените `getApiUrl()` на возврат URL туннеля
4. Загрузите обновленный `app.js` на Netlify

## Временное решение

Для демонстрации можно временно использовать локальный API, если Web App открывается локально.

