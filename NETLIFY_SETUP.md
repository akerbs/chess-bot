# Настройка Netlify для работы с API

## Шаг 1: Загрузите файлы на Netlify

Загрузите всю папку `webapp/` на Netlify (включая папку `netlify/`).

## Шаг 2: Настройте переменную окружения

1. Зайдите в настройки вашего сайта на Netlify
2. Перейдите в **Site settings** → **Environment variables**
3. Добавьте переменную:
   - **Key**: `API_SERVER_URL`
   - **Value**: URL вашего API сервера (например, через туннель: `https://api-xyz.trycloudflare.com`)

## Шаг 3: Получите публичный URL для API

### Вариант A: Используйте ngrok (если работает)

```bash
ngrok http 3001
```

Скопируйте HTTPS URL и используйте его в переменной окружения.

### Вариант B: Используйте cloudflared (если установлен)

```bash
cloudflared tunnel --url http://localhost:3001
```

### Вариант C: Разверните API на отдельном сервере

Разверните API сервер на VPS, Heroku, Railway и т.д., и используйте его URL.

## Шаг 4: Пересоберите сайт

После добавления переменной окружения Netlify автоматически пересоберет сайт.

## Альтернатива: Локальная разработка

Для локальной разработки все работает автоматически:
- Web App обращается к `http://localhost:3001`
- API сервер запускается вместе с ботом

## Проверка

После настройки:
1. Откройте Web App в Telegram
2. Выберите фигуру - должны появиться валидные ходы
3. Сделайте ход - фигура должна переместиться
4. Бот должен автоматически сделать свой ход

Если что-то не работает, проверьте:
- Переменная окружения `API_SERVER_URL` установлена
- API сервер доступен по указанному URL
- Netlify Functions работают (проверьте логи в Netlify)

